var __fetch__=require("./fetch.js"),__logger__=require("../../logger");module.exports=function(e,o,_,t,r){"use strict";return new Promise(function(n){return!r&&_.update.wait()?(__logger__.warn("Updated too recently. Skipping update."),void n(!1)):(_.update.now(),void t.load(!0).then(function(r){__logger__.log("Local version:",e.version(),"Remote version:",r.version),r.version===e.version()?(__logger__.log("Already up-to-date."),_.update.increment(),n(!1)):(_.update.reset(),__logger__.log("Update needed."),__fetch__(_,o,t).then(function(){__logger__.log("Update completed."),n(!0)}))}))})};