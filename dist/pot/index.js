var __app__=require("./app"),__network__=require("./network"),__filesystem__=require("./filesystem"),__config__=require("./config"),__logger__=require("../logger"),ospath=require("path");module.exports=function e(_,n,t,o){"use strict";if(!(this instanceof e))throw{code:0,description:"Constructor must be called with new.",url:""};var r=this,i=new __filesystem__.path(n),s=new __config__(ospath.resolve(n,"potty.json")),u=new __network__.remote(_,{id:s.id()}),l=t,a=o,g=new __app__(u,i,l,s);r.start=function(){__logger__.log("Potty starting."),__network__.online().then(function(e){return e?(__logger__.log("Online. Doing on-boot update."),g.update().then(function(){g.run(a)})):g.run(a)})},r.version=g.version,r.handle=g.handle,r.on=g.on};