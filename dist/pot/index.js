var __app__=require("./app"),__network__=require("./network"),__filesystem__=require("./filesystem"),__config__=require("./config"),__logger__=require("../logger"),ospath=require("path");module.exports=function e(_,r,n,o){"use strict";if(!(this instanceof e))throw{code:1,description:"Constructor must be called with new.",url:""};var t=this,i=new __filesystem__.path(r),s=new __config__(ospath.resolve(r,"potty.json")),u=new __network__.remote(_,{id:s.id()}),l=n,a=o,g=new __app__(u,i,l,s);i.on("error",function(e){g.trigger("error",e)}),t.start=function(){__logger__.log("Potty starting."),__network__.online().then(function(e){return e?(__logger__.log("Online. Doing on-boot update."),g.update().then(function(){g.run(a)})):g.run(a)})},t.version=g.version,t.handle=g.handle,t.on=g.on};